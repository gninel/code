# 添加数据统计功能 - 执行计划

## 任务目标
在2.light_refraction_demo.html中添加实时数据统计功能，向指定API发送实验参数和用户操作数据

## 实现方案
采用最小侵入式集成方案，在现有代码基础上添加数据收集函数，在关键交互点调用

## 技术规范
- **API端点**: http://wzkjgz.site/quickform/api/submit/c1b84071-aa78-4859-8f2b-d26155e27ae2
- **请求方法**: POST
- **数据格式**: JSON
- **触发时机**: 页面加载、参数调整、预设操作、重置操作

## 实现步骤
1. 添加数据收集核心函数
2. 集成页面加载事件
3. 集成参数调整事件
4. 集成预设按钮事件
5. 集成重置功能事件
6. 集成错误处理机制
7. 测试验证

## 数据结构
```json
{
  "timestamp": "ISO 8601时间戳",
  "action": "操作类型",
  "parameters": {
    "incidentAngle": "入射角度值",
    "medium1": "介质1类型",
    "medium2": "介质2类型",
    "refractedAngle": "计算出的折射角度",
    "presetName": "预设名称(仅预设操作)"
  },
  "userAgent": "浏览器信息",
  "sessionId": "会话ID"
}
```

## 上下文信息
- **项目**: PhysicsEducation - 初中物理在线演示实验
- **文件**: /Users/zhb/code/physlab/2.light_refraction_demo.html
- **现有交互点**: 入射角度滑块、介质选择、预设按钮、重置按钮
- **错误处理**: 利用现有showErrorMessage函数

## 预期结果
- 所有用户交互都能正确触发数据发送
- 发送失败时弹出用户友好的错误提示
- 不影响原有功能的正常使用