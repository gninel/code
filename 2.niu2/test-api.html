<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è±†åŒ…APIæµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        button { padding: 10px 20px; margin: 10px 0; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer; }
        .result { margin: 10px 0; padding: 10px; border: 1px solid #ccc; border-radius: 4px; }
        .error { border-color: #ef4444; background: #fef2f2; }
        .success { border-color: #10b981; background: #f0fdf4; }
    </style>
</head>
<body>
    <h1>è±†åŒ…å¤§æ¨¡å‹APIæµ‹è¯•</h1>
    <button onclick="testDoubaoAPI()">æµ‹è¯•è±†åŒ…APIè¿æ¥</button>
    <div id="result"></div>

    <script>
        const DOUBAO_API_CONFIG = {
            baseUrl: '/api/ark', // ä½¿ç”¨ä»£ç†
            endpointId: 'ep-20251112223504-j8pvh',
            apiKey: '405fe7f2-f603-4c4c-b04b-bdea5d441319'
        };

        async function testDoubaoAPI() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '<div class="result">æ­£åœ¨æµ‹è¯•è±†åŒ…APIè¿æ¥...</div>';

            try {
                console.log('ğŸš€ å¼€å§‹æµ‹è¯•è±†åŒ…API');

                const response = await fetch(`${DOUBAO_API_CONFIG.baseUrl}/chat/completions`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${DOUBAO_API_CONFIG.apiKey}`,
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify({
                        model: DOUBAO_API_CONFIG.endpointId,
                        messages: [
                            {
                                role: 'user',
                                content: 'ä½ å¥½ï¼Œè¯·ç®€å•å›å¤ä¸€ä¸‹'
                            }
                        ],
                        max_tokens: 50,
                        temperature: 0.7
                    })
                });

                console.log('ğŸ“¥ APIå“åº”çŠ¶æ€:', response.status, response.statusText);

                if (!response.ok) {
                    const errorText = await response.text();
                    console.error('âŒ APIé”™è¯¯:', errorText);
                    resultDiv.innerHTML = `<div class="result error">âŒ APIé”™è¯¯ (${response.status}): ${errorText}</div>`;
                    return;
                }

                const data = await response.json();
                console.log('âœ… APIå“åº”æˆåŠŸ:', data);

                if (data.choices && data.choices.length > 0) {
                    const reply = data.choices[0].message.content;
                    resultDiv.innerHTML = `<div class="result success">âœ… APIè¿æ¥æˆåŠŸï¼<br>æ¨¡å‹å›å¤: ${reply}</div>`;
                } else {
                    resultDiv.innerHTML = `<div class="result error">âŒ APIè¿”å›æ ¼å¼é”™è¯¯: ${JSON.stringify(data)}</div>`;
                }

            } catch (error) {
                console.error('âŒ æµ‹è¯•å¤±è´¥:', error);
                resultDiv.innerHTML = `<div class="result error">âŒ æµ‹è¯•å¤±è´¥: ${error.message}</div>`;
            }
        }
    </script>
</body>
</html>