# 自传版本管理功能 - 手动测试指南

## 测试环境准备
1. 确保应用已编译并运行
2. 确保至少有一个已生成的自传
3. 打开应用并导航到"自传"页面

## 测试用例

### 1. 版本保存功能测试

#### 测试1.1: 基本保存功能
**步骤：**
1. 在自传页面，点击右上角的"历史"图标（时钟图标）
2. 在弹出的底部菜单中，点击"保存当前版本"
3. 查看默认版本名称（应为当前日期时间，格式：YYYY-MM-DD HH:MM:SS）
4. 不修改名称，直接点击"保存"按钮

**预期结果：**
- ✅ 显示"正在保存版本..."提示
- ✅ 1.5秒后显示"版本已保存"提示
- ✅ 对话框自动关闭
- ✅ 无错误信息

**实际结果：**
- [ ] 通过 / [ ] 失败
- 问题描述：___________________

#### 测试1.2: 自定义版本名称
**步骤：**
1. 点击"历史"图标 > "保存当前版本"
2. 修改版本名称为"第一版"
3. 点击"保存"

**预期结果：**
- ✅ 成功保存，提示"版本已保存"
- ✅ 版本名称为"第一版"

**实际结果：**
- [ ] 通过 / [ ] 失败

#### 测试1.3: 特殊字符版本名称
**测试名称：**
- "版本@#%"
- "版本 with spaces"
- "版本「中文符号」"
- "版本/斜杠"

**预期结果：**
- ✅ 所有特殊字符都能正常保存

**实际结果：**
- [ ] 通过 / [ ] 失败
- 失败的字符：___________________

#### 测试1.4: 空版本名称
**步骤：**
1. 清空版本名称输入框
2. 点击"保存"

**预期结果：**
- ✅ 不保存，或使用默认名称

**实际结果：**
- [ ] 通过 / [ ] 失败

#### 测试1.5: 长版本名称
**步骤：**
1. 输入100个字符的版本名称
2. 保存

**预期结果：**
- ✅ 成功保存长名称

**实际结果：**
- [ ] 通过 / [ ] 失败

---

### 2. 版本列表显示测试

#### 测试2.1: 查看版本列表
**步骤：**
1. 保存2-3个版本
2. 点击"历史"图标 > "恢复历史版本"

**预期结果：**
- ✅ 显示版本列表页面
- ✅ 列表显示所有已保存的版本
- ✅ 每个版本显示：
  - 版本编号（如"版本 1"）
  - 版本名称
  - 字数统计
  - 创建时间
- ✅ 版本按创建时间倒序排列（最新的在前）

**实际结果：**
- [ ] 通过 / [ ] 失败
- 显示的版本数：___________
- 排序是否正确：[ ] 是 / [ ] 否

#### 测试2.2: 空版本列表
**步骤：**
1. 删除所有版本或使用新自传
2. 点击"恢复历史版本"

**预期结果：**
- ✅ 显示"暂无历史版本"或空列表提示

**实际结果：**
- [ ] 通过 / [ ] 失败

#### 测试2.3: 大量版本显示
**步骤：**
1. 保存15-20个版本
2. 查看版本列表

**预期结果：**
- ✅ 列表流畅滚动
- ✅ 所有版本都能正确显示
- ✅ 无性能问题

**实际结果：**
- [ ] 通过 / [ ] 失败
- 性能问题：___________________

---

### 3. 版本预览功能测试

#### 测试3.1: 预览版本内容
**步骤：**
1. 在版本列表中，点击某个版本的"预览"按钮（眼睛图标）

**预期结果：**
- ✅ 弹出对话框显示版本内容
- ✅ 内容与保存时一致
- ✅ 可以滚动查看全部内容

**实际结果：**
- [ ] 通过 / [ ] 失败

#### 测试3.2: 关闭预览
**步骤：**
1. 打开预览对话框
2. 点击"关闭"或对话框外部

**预期结果：**
- ✅ 对话框正常关闭

**实际结果：**
- [ ] 通过 / [ ] 失败

---

### 4. 版本恢复功能测试

#### 测试4.1: 基本恢复功能
**步骤：**
1. 修改当前自传内容（记住修改内容）
2. 点击"历史"图标 > "恢复历史版本"
3. 选择一个历史版本，点击"恢复"按钮
4. 在确认对话框中点击"确定"

**预期结果：**
- ✅ 显示确认对话框，提示"恢复后当前内容将被替换"
- ✅ 点击确定后，自传内容恢复到选中的版本
- ✅ 显示"版本已恢复"成功提示
- ✅ 自动返回自传列表页面
- ✅ 自传列表已刷新

**实际结果：**
- [ ] 通过 / [ ] 失败
- 内容是否正确恢复：[ ] 是 / [ ] 否
- 问题描述：___________________

#### 测试4.2: 取消恢复
**步骤：**
1. 点击恢复按钮
2. 在确认对话框中点击"取消"

**预期结果：**
- ✅ 对话框关闭
- ✅ 不执行恢复操作
- ✅ 内容保持不变

**实际结果：**
- [ ] 通过 / [ ] 失败

#### 测试4.3: 连续恢复
**步骤：**
1. 恢复版本A
2. 再恢复版本B
3. 再恢复版本A

**预期结果：**
- ✅ 每次恢复都成功
- ✅ 内容正确切换

**实际结果：**
- [ ] 通过 / [ ] 失败

---

### 5. 版本删除功能测试

#### 测试5.1: 删除单个版本
**步骤：**
1. 在版本列表中，点击某个版本的"删除"按钮
2. 在确认对话框中点击"确定"

**预期结果：**
- ✅ 显示确认对话框
- ✅ 版本被删除
- ✅ 列表自动刷新
- ✅ 显示"版本已删除"提示

**实际结果：**
- [ ] 通过 / [ ] 失败

#### 测试5.2: 取消删除
**步骤：**
1. 点击删除按钮
2. 在确认对话框中点击"取消"

**预期结果：**
- ✅ 不删除版本
- ✅ 版本仍在列表中

**实际结果：**
- [ ] 通过 / [ ] 失败

#### 测试5.3: 删除所有版本
**步骤：**
1. 逐个删除所有版本

**预期结果：**
- ✅ 所有版本都能成功删除
- ✅ 最后显示空列表

**实际结果：**
- [ ] 通过 / [ ] 失败

---

### 6. 版本数量限制测试

#### 测试6.1: 达到20个版本上限
**步骤：**
1. 连续保存21个版本（可以用脚本快速保存）
2. 查看版本列表

**预期结果：**
- ✅ 只保留最新的20个版本
- ✅ 最早的版本被自动删除
- ✅ 版本总数不超过20

**实际结果：**
- [ ] 通过 / [ ] 失败
- 实际版本数：___________
- 最早版本是否被删除：[ ] 是 / [ ] 否

---

### 7. 数据完整性测试

#### 测试7.1: 章节数据完整性
**步骤：**
1. 选择一个包含多个章节的自传
2. 保存为版本
3. 恢复该版本
4. 检查章节数据

**预期结果：**
- ✅ 章节数量正确
- ✅ 章节标题正确
- ✅ 章节内容正确
- ✅ 章节顺序正确

**实际结果：**
- [ ] 通过 / [ ] 失败
- 章节数量：保存_____ vs 恢复_____

#### 测试7.2: 特殊内容保存
**测试内容包含：**
- emoji表情 😊🎉
- 中文标点「」『』
- 英文标点"'
- 换行符
- 长段落（1000+字）

**预期结果：**
- ✅ 所有特殊内容都能正确保存和恢复

**实际结果：**
- [ ] 通过 / [ ] 失败
- 丢失的内容：___________________

---

### 8. 错误处理测试

#### 测试8.1: 网络错误（如果有云同步）
**步骤：**
1. 断开网络
2. 保存版本

**预期结果：**
- ✅ 本地保存成功
- ✅ 显示适当的提示

**实际结果：**
- [ ] 通过 / [ ] 失败

#### 测试8.2: 存储空间不足
**步骤：**
1. 模拟存储空间不足
2. 保存版本

**预期结果：**
- ✅ 显示错误提示
- ✅ 不崩溃

**实际结果：**
- [ ] 通过 / [ ] 失败

---

### 9. UI/UX测试

#### 测试9.1: 界面响应速度
**预期结果：**
- ✅ 保存操作 < 2秒
- ✅ 列表加载 < 1秒
- ✅ 恢复操作 < 2秒
- ✅ 删除操作 < 1秒

**实际结果：**
- 保存耗时：_____秒
- 列表加载：_____秒
- 恢复耗时：_____秒
- 删除耗时：_____秒

#### 测试9.2: 用户反馈
**预期结果：**
- ✅ 所有操作都有即时反馈
- ✅ 加载状态有指示器
- ✅ 错误信息清晰易懂

**实际结果：**
- [ ] 通过 / [ ] 失败

---

### 10. 并发测试

#### 测试10.1: 快速连续操作
**步骤：**
1. 快速连续点击"保存"按钮3次

**预期结果：**
- ✅ 不重复保存
- ✅ 或正确保存3个版本
- ✅ 不崩溃

**实际结果：**
- [ ] 通过 / [ ] 失败
- 保存的版本数：___________

---

## 测试总结

### 通过的测试用例数：_____ / 总测试用例数

### 发现的问题列表：

1. **问题名称：** ___________________
   - **严重程度：** [ ] 严重 [ ] 中等 [ ] 轻微
   - **重现步骤：** ___________________
   - **预期行为：** ___________________
   - **实际行为：** ___________________
   - **截图/日志：** ___________________

2. **问题名称：** ___________________
   - **严重程度：** [ ] 严重 [ ] 中等 [ ] 轻微
   - **重现步骤：** ___________________
   - **预期行为：** ___________________
   - **实际行为：** ___________________
   - **截图/日志：** ___________________

### 改进建议：

1. ___________________
2. ___________________
3. ___________________

---

## 测试人员
- **姓名：** ___________________
- **日期：** ___________________
- **版本：** ___________________
