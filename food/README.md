# é£Ÿç‰©çƒ­é‡è¯†åˆ«åº”ç”¨

åŸºäºFlutterå¼€å‘çš„Androidåº”ç”¨ï¼Œé€šè¿‡è°ƒç”¨è±†åŒ…å¤šæ¨¡æ€å¤§æ¨¡å‹è¯†åˆ«é£Ÿç‰©å¹¶ä¼°ç®—çƒ­é‡ï¼Œæ”¯æŒæ¯æ—¥æ±‡æ€»ç»Ÿè®¡ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- **æ™ºèƒ½è¯†åˆ«**: ä½¿ç”¨è±†åŒ…å¤šæ¨¡æ€å¤§æ¨¡å‹è¯†åˆ«é£Ÿç‰©å›¾ç‰‡
- **çƒ­é‡ä¼°ç®—**: åŸºäºAIåˆ†æä¼°ç®—é£Ÿç‰©çƒ­é‡å’Œè¥å…»æˆåˆ†
- **é¤æ¬¡ç®¡ç†**: æ”¯æŒæ—©é¤ã€åˆé¤ã€æ™šé¤åˆ†ç±»è®°å½•
- **æ¯æ—¥æ±‡æ€»**: è‡ªåŠ¨è®¡ç®—æ¯æ—¥æ€»çƒ­é‡å’Œé¤æ¬¡åˆ†å¸ƒ
- **æ•°æ®ç»Ÿè®¡**: è¯¦ç»†çš„é¥®é£Ÿæ•°æ®åˆ†æå’Œè¶‹åŠ¿å›¾è¡¨

### ğŸ›  æŠ€æœ¯ç‰¹ç‚¹
- **Flutter 3.x**: ç°ä»£åŒ–è·¨å¹³å°UIæ¡†æ¶
- **SQLiteæœ¬åœ°å­˜å‚¨**: å¯é çš„æ•°æ®æŒä¹…åŒ–
- **æ™ºèƒ½ç¼“å­˜**: å¤šå±‚ç¼“å­˜æœºåˆ¶æå‡æ€§èƒ½
- **ç›¸æœºé›†æˆ**: ä¼˜åŒ–çš„æ‹ç…§ä½“éªŒ
- **çŠ¶æ€ç®¡ç†**: ProviderçŠ¶æ€ç®¡ç†æ¶æ„

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Flutter 3.10.0+
- Android SDK API 21+
- Dart 3.0+

### å®‰è£…æ­¥éª¤

1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd food_calorie_app
```

2. å®‰è£…ä¾èµ–
```bash
flutter pub get
```

3. é…ç½®APIå¯†é’¥
```bash
# ç¼–è¾‘ lib/services/api_service.dart ä¸­çš„ API é…ç½®
```

4. è¿è¡Œåº”ç”¨
```bash
flutter run
```

5. æ„å»ºå‘å¸ƒç‰ˆæœ¬
```bash
flutter build apk --release
```

## é¡¹ç›®ç»“æ„

```
food_calorie_app/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ main.dart                 # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ app.dart                  # åº”ç”¨é…ç½®å’Œå·¥å…·
â”‚   â”œâ”€â”€ models/                   # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ food_item.dart
â”‚   â”‚   â”œâ”€â”€ daily_record.dart
â”‚   â”‚   â””â”€â”€ api_response.dart
â”‚   â”œâ”€â”€ services/                 # æ ¸å¿ƒæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ api_service.dart      # APIè°ƒç”¨æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ database_service.dart # æ•°æ®åº“æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ camera_service.dart   # ç›¸æœºæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ storage_service.dart  # å­˜å‚¨ç¼“å­˜æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ network_service.dart  # ç½‘ç»œæœåŠ¡
â”‚   â”‚   â””â”€â”€ backup_service.dart   # å¤‡ä»½æœåŠ¡
â”‚   â”œâ”€â”€ providers/                # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ food_provider.dart
â”‚   â”‚   â””â”€â”€ statistics_provider.dart
â”‚   â”œâ”€â”€ screens/                  # é¡µé¢
â”‚   â”‚   â”œâ”€â”€ home_screen.dart
â”‚   â”‚   â”œâ”€â”€ camera_screen.dart
â”‚   â”‚   â”œâ”€â”€ result_screen.dart
â”‚   â”‚   â””â”€â”€ statistics_screen.dart
â”‚   â”œâ”€â”€ widgets/                  # UIç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ food_card.dart
â”‚   â”‚   â”œâ”€â”€ daily_summary.dart
â”‚   â”‚   â”œâ”€â”€ loading_widget.dart
â”‚   â”‚   â””â”€â”€ food_analysis_card.dart
â”‚   â””â”€â”€ utils/                    # å·¥å…·ç±»
â”‚       â”œâ”€â”€ calorie_calculator.dart
â”‚       â”œâ”€â”€ image_utils.dart
â”‚       â””â”€â”€ performance_optimizer.dart
â”œâ”€â”€ android/                      # Androidé…ç½®
â”œâ”€â”€ test/                         # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ pubspec.yaml                  # ä¾èµ–é…ç½®
â””â”€â”€ README.md                     # é¡¹ç›®æ–‡æ¡£
```

## APIé…ç½®

### è±†åŒ…å¤šæ¨¡æ€API
åº”ç”¨ä½¿ç”¨è±†åŒ…å¤šæ¨¡æ€å¤§æ¨¡å‹è¿›è¡Œé£Ÿç‰©è¯†åˆ«ï¼Œéœ€è¦åœ¨ `lib/services/api_service.dart` ä¸­é…ç½®ï¼š

```dart
static const String _apiKey = 'your_api_key_here';
static const String _model = 'doubao-seed-1-6-vision-250815';
```

### æƒé™é…ç½®
åº”ç”¨éœ€è¦ä»¥ä¸‹æƒé™ï¼š

```xml
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.INTERNET" />
```

## ä½¿ç”¨è¯´æ˜

### åŸºæœ¬ä½¿ç”¨æµç¨‹

1. **æ‹ç…§è¯†åˆ«**
   - ç‚¹å‡»ç›¸æœºæŒ‰é’®æˆ–æ‹ç…§æŒ‰é’®
   - å¯¹å‡†é£Ÿç‰©æ‹ç…§
   - ç­‰å¾…AIè¯†åˆ«ç»“æœ

2. **æŸ¥çœ‹ç»“æœ**
   - æŸ¥çœ‹è¯†åˆ«çš„é£Ÿç‰©ä¿¡æ¯
   - ç¡®è®¤æˆ–ç¼–è¾‘é£Ÿç‰©ä¿¡æ¯
   - é€‰æ‹©é¤æ¬¡ç±»å‹

3. **ä¿å­˜è®°å½•**
   - ç‚¹å‡»ä¿å­˜æŒ‰é’®
   - æŸ¥çœ‹ä»Šæ—¥çƒ­é‡æ±‡æ€»

4. **æ•°æ®ç»Ÿè®¡**
   - åˆ‡æ¢åˆ°ç»Ÿè®¡é¡µé¢
   - æŸ¥çœ‹è¯¦ç»†æ•°æ®åˆ†æ
   - æŸ¥çœ‹è¶‹åŠ¿å›¾è¡¨

### é«˜çº§åŠŸèƒ½

- **æ‰¹é‡è¯†åˆ«**: æ”¯æŒè¿ç»­æ‹ç…§è¯†åˆ«å¤šé“èœ
- **å†å²è®°å½•**: æŸ¥çœ‹æ‰€æœ‰å†å²è¯†åˆ«è®°å½•
- **æ•°æ®å¯¼å‡º**: æ”¯æŒå¯¼å‡ºé¥®é£Ÿæ•°æ®
- **å¤‡ä»½æ¢å¤**: æ”¯æŒæ•°æ®å¤‡ä»½å’Œæ¢å¤

## æµ‹è¯•

### è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
flutter test

# è¿è¡Œå•å…ƒæµ‹è¯•
flutter test test/unit/

# è¿è¡ŒWidgetæµ‹è¯•
flutter test test/widget/

# è¿è¡Œé›†æˆæµ‹è¯•
flutter test test/integration/

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
flutter test --coverage
```

### æµ‹è¯•è¦†ç›–
- âœ… çƒ­é‡è®¡ç®—å™¨æµ‹è¯•
- âœ… æ•°æ®æ¨¡å‹æµ‹è¯•
- âœ… UIç»„ä»¶æµ‹è¯•
- âœ… æœåŠ¡å±‚æµ‹è¯•
- âœ… é›†æˆæµ‹è¯•

## æ€§èƒ½ä¼˜åŒ–

### å†…å­˜ç®¡ç†
- ä½¿ç”¨å†…å­˜ç¼“å­˜ç®¡ç†å™¨
- å®ç°LRUç¼“å­˜ç­–ç•¥
- å›¾ç‰‡ç¼“å­˜å’Œè‡ªåŠ¨æ¸…ç†

### ç½‘ç»œä¼˜åŒ–
- æ™ºèƒ½HTTPç¼“å­˜
- è¯·æ±‚é‡è¯•æœºåˆ¶
- æ‰¹é‡è¯·æ±‚ä¼˜åŒ–

### UIæ€§èƒ½
- ä½¿ç”¨ListView.builder
- å›¾ç‰‡æ‡’åŠ è½½
- çŠ¶æ€ç®¡ç†ä¼˜åŒ–

## æ„å»ºå‘å¸ƒ

### Androidå‘å¸ƒ
```bash
# æ„å»ºAPK
flutter build apk --release --split-per-abi

# æ„å»ºApp Bundle
flutter build appbundle --release
```

### ä»£ç æ··æ·†
å¯ç”¨ProGuardè¿›è¡Œä»£ç æ··æ·†å’Œä¼˜åŒ–ï¼š

```gradle
android {
    buildTypes {
        release {
            minifyEnabled true
            shrinkResources true
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
}
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç›¸æœºæƒé™é—®é¢˜**
   - æ£€æŸ¥AndroidManifest.xmlæƒé™é…ç½®
   - ç¡®ä¿è¿è¡Œæ—¶æƒé™è¯·æ±‚æ­£å¸¸

2. **APIè°ƒç”¨å¤±è´¥**
   - éªŒè¯APIå¯†é’¥é…ç½®
   - æ£€æŸ¥ç½‘ç»œè¿æ¥çŠ¶æ€
   - æŸ¥çœ‹APIè°ƒç”¨é™åˆ¶

3. **æ•°æ®åº“é—®é¢˜**
   - æ¸…é™¤åº”ç”¨æ•°æ®é‡è¯•
   - æ£€æŸ¥æ•°æ®åº“åˆå§‹åŒ–é€»è¾‘

4. **æ€§èƒ½é—®é¢˜**
   - æ£€æŸ¥å†…å­˜ä½¿ç”¨æƒ…å†µ
   - ä¼˜åŒ–å›¾ç‰‡å¤§å°å’Œæ•°é‡
   - å¯ç”¨æ€§èƒ½ç›‘æ§

## è´¡çŒ®æŒ‡å—

1. Forké¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»ºPull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-01-01)
- âœ¨ é¦–æ¬¡å‘å¸ƒ
- âœ¨ åŸºç¡€é£Ÿç‰©è¯†åˆ«åŠŸèƒ½
- âœ¨ çƒ­é‡è®¡ç®—å’Œç»Ÿè®¡
- âœ¨ æ•°æ®å¤‡ä»½å’Œæ¢å¤
- âœ¨ æ€§èƒ½ä¼˜åŒ–å’Œæµ‹è¯•è¦†ç›–

## æŠ€æœ¯æ”¯æŒ

- ğŸ“§ é‚®ç®±: support@foodcalorie.com
- ğŸ“± æ–‡æ¡£: https://docs.foodcalorie.com
- ğŸ› é—®é¢˜åé¦ˆ: https://github.com/foodcalorie/issues

## è‡´è°¢

- Flutterå›¢é˜Ÿæä¾›ä¼˜ç§€çš„è·¨å¹³å°æ¡†æ¶
- å­—èŠ‚è·³åŠ¨è±†åŒ…å›¢é˜Ÿæä¾›å¼ºå¤§çš„AIèƒ½åŠ›
- æ‰€æœ‰å¼€æºç¤¾åŒºè´¡çŒ®è€…

---

**é£Ÿç‰©çƒ­é‡è¯†åˆ«åº”ç”¨** - è®©å¥åº·é¥®é£Ÿç®¡ç†æ›´ç®€å• ğŸ¥—